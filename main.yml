---
- hosts: all
  become: yes

  vars_files:
    - config.default.yml

  pre_tasks:
    - name: Include playbook configuration.
      include_vars: "{{ item }}"
      with_fileglob:
        - "{{ playbook_dir }}/config.yml"
      tags: ['always']

  tasks:

    - import_tasks: tasks/apt_pkgs.yml
      tags:
        - apt

    - import_tasks: tasks/deb_local_pkgs.yml
      tags:
        - deb

    - import_tasks: tasks/snap_pkgs.yml
      tags:
        - snap

    - import_tasks: tasks/pip_pkgs.yml
      tags:
        - pip

    - import_tasks: tasks/nvm.yml
      tags:
        - nvm

    - import_tasks: tasks/awscli.yml
      tags:
        - awscli

    - import_tasks: tasks/local_settings.yml
      tags:
        - local
